\include{settings}

\begin{document}

\include{title}

\tableofcontents
\newpage

\section{Программа работы}

\begin{enumerate}
	\item Осуществить переход от многокритериальной задачи к однокритериальной с использованием следующих подходов.  Сформировать множество Парето из всех решений, полученных в результате выполнения этого пункта.
		\begin{enumerate}
			\item Выделение главного критерия
			\item Свертка критериев (аддитивная и мультипликативная)
			\item Максимин или минимакс (он же метод максиминной свертки)
			\item Метод последовательных уступок
			\item fgoalattain 
			\item Ведение метрики в пространстве критериев
		\end{enumerate}
	\item Выбрать одну из однокритериальных задач.
		\begin{enumerate}
			\item Привести подробную математическую модель выбранной задачи.
			\item Проанализировать полученное решение:\\
			Найти левые части ограничений задачи для полученного решения (численные значения).\\
			Обозначить активные ограничения задачи.\\
			Выбрать одно из активных ограничений задачи для преобразования в вероятностное: 
			$P\left( \sum_{j=1}^n a_{ij} x_j - b_i \leq 0 \right) \geq \alpha_i$.\\
			Решить задачу полученную задачу стохастического программирования, меняя $\alpha_i$ в следующем диапазоне: $0.1 \leq \alpha_i \leq 0.9$.\\
			Считать случайной величиной $b_i$ или элементы $\{a_{ij}\}$ $i$-й строки матрицы    (по выбору).
		\end{enumerate}
\end{enumerate}

\section{Постановка задачи}

Необходимо создать смесь для приготовления докторской колбасы.
По ГОСТу массовая доля должна быть: влаги – не более $65\%$, соли – не более $2.1\%$, жира – не более $22\%$, белка – не менее $13\%$.
Для достижения хорошего вкуса необходимо соблюдать следующие пропорции: жира должно быть больше белка, отношение жира к влаге $\leq 1$, отношение белка к соли $\leq 10$.
Необходимо максимизировать количество белка в продукте и калорийность продукта в целом. Минимизировать – количество жира и стоимость.
Стоимость воды условно бесплатно, соли – $0.01$, жира – $0.1$, белка – $1$. Калорийность жира – $200$ ккал, белка – $100$ ккал.

\newpage

\section{Математическая модель}

\noindent Составим математическую модель задачи. Для определенности ограничим минимальные доли влаги, соли и белка $1$, а максимальную долю белка -- $99$. Обозначим переменные: $x_1$ – влага, $x_2$ – соль, $x_3$ – жир, $x_4$ – белок. С учетом требований пакета MATLAB к постановке задач оптимизации, необходимо представить целевые функции как поиск минимумов, а ограничения записать в виде $g(x) \leq 0$, поэтому преобразуем исходные ограничения.

\begin{equation*}
	\begin{aligned}[c]
		\begin{cases}
		\max(x_4) \\
		\max(200 \cdot x_3 + 100 \cdot x_4) \\
		\min(x_3) \\
		\min(0.01 \cdot x_2 + 0.1 \cdot x_3 + 1 \cdot x_4) \\
		x_1 + x_2 + x_3 + x_4 = 100 \\
		1 \leq x_1 \leq 65 \\
		1 \leq x_2 \leq 2.1 \\
		1 \leq x_3 \leq 22 \\
		13 \leq x_4 \leq 99 \\
		x_3 \geq x_4 \\
		\dfrac{x_3}{x_1} \leq 1 \\
		\dfrac{x_4}{x_2} \leq 10
		\end{cases}
	\end{aligned}
	\leftrightarrow
	\begin{aligned}[c]
		\begin{cases}
		\min(-x_4) = \min(f_1) \\
		\min(-200 \cdot x_3 - 100 \cdot x_4) = \min(f_2) \\
		\min(x_3) = \min(f_3) \\
		\min(0.01 \cdot x_2 + 0.1 \cdot x_3 + 1 \cdot x_4) = \min(f_4) \\
		x_1 + x_2 + x_3 + x_4 - 100 = 0 \\
		1 - x_1 \leq 0 \\
		x_1 - 65 \leq 0 \\
		1 - x_2 \leq 0 \\
		x_2 - 2.1 \leq 0 \\
		1 - x_3 \leq 0 \\
		x_3 - 22 \leq 0 \\
		13 - x_4 \leq 0 \\
		x_4 - 99 \leq 0 \\
		x_4 - x_3 \leq 0 \\
		x_3 - x_1 \leq 0 \\
		x_4 - 10 \cdot x_2 \leq 0
		\end{cases}
	\end{aligned}
\end{equation*}

\section{Поиск оптимумов частных критериев}
Найдем оптимумы каждой из целевых функций независимо от других. Для этого необходимо решить четыре задачи однокритериальной оптимизации: для $f_i$, $i \in \{1,2,3,4\}$ при тех же ограничениях на $x_j$, $j \in \{1, 2, 3, 4\}$, что имеют место для задачи многокритериальной оптимизации.

\lstinputlisting[caption=\code{model.m}]{model.m}

\begin{lstlisting}[caption=\code{console.m}]
>> [x, f] = fmincon(f1, lb, A, b, Aeq, beq, lb, ub)
x =
	55.2483    2.1000   21.6517   21.0000
f =
	-21.0000
>> fmincon(f2, lb, A, b, Aeq, beq, lb, ub)
x =
	54.9000    2.1000   22.0000   21.0000
f =
	-6.5000e+03
>> fmincon(f3, lb, A, b, Aeq, beq, lb, ub)
x =
	65.0000    2.1000   16.4500   16.4500
f =
	16.4500
>> fmincon(f4, lb, A, b, Aeq, beq, lb, ub)
x =
	65.0000    2.1000   19.9000   13.0000
f =
	15.0110
\end{lstlisting}

Таким образом, были получены следующие оптимальные значения:

\begin{enumerate}
	\item Доля белка $21$.
	\item Общая калорийность $6500$.
	\item Доля жира $16.45$.
	\item Общая стоимость $15.011$.
\end{enumerate}

\section{Переход от многокритериальной задачи к однокритериальной}

\subsection{Выделение главного критерия}

В данном методе выбирается один из критериев, например $C_i$, который наиболее полно отражает цель принятия решений. Остальные критерии учитываются только с точки зрения возможного указания их нижних границ $C_j(a) \geq \gamma_i$, $j \neq i$. Таким образом, исходная задача многокритериального принятия решений заменяется однокритериальной задачей с критерием $C_i$.

В данной задаче главным является критерий $f_4$ (стоимость всего продукта). Поэтому оптимум частного критерия $f_4$ из предыдущего пункта является решением задачи методом выделения главного критерия. Минимальная стоимость всего продукта при этом оказалась равна $15.0110$.

\subsection{Свертка критериев}

\subsubsection{Аддитивная свертка критериев}

Для использования метода аддитивной свертки необходимо выполнить нормировку критериев, с тем чтобы сделать их значения соизмеримыми, а единицы измерения – безразмерными. Выполним нормировку, поделив значение каждой целевой функции на ее оптимальный оптимум.

Формула аддитивной свертки имеет вид:
$$
F(x) = \sum_{i=1}^{r}w_i f_i(x),\ 0<w_i<1,\ \sum_i w_i=1,
$$
где $f_i(x)$ - критерии оптимальности, $r$ – их общее число, а $w_i$ - параметры важности. 

Примем $w_1 = 0.3$, $w_2 = 0.2$, $w_3 = 0.2$, $w_4 = 0.3$, тем самым отдав предпочтение более высокой доли белка в продукте и более низкой стоимости.

\lstinputlisting[caption=\code{additive.m}]{additive.m}

\begin{lstlisting}[caption=\code{console.m}]
>> [x, ~] = fmincon(f, lb, A, b, Aeq, beq, lb, ub)
x = 
	64.9999    2.0999   16.4502   16.4500
>> f1(x)
ans =
	-16.4500
>> f2(x)
ans =
	-4.9350e+03
>> f3(x)
ans =
	16.4502
>> f4(x)
ans =
	18.1160

\end{lstlisting}

Метод аддитивной свертки позволил получить решение:

\begin{enumerate}
	\item Доля белка $16.45$ ($-22\%$ от максимальной).
	\item Общая калорийность $4935$ ($-24\%$ от максимальной).
	\item Доля жира $16.4502$ ($+0\%$ от минимальной).
	\item Общая стоимость $18.1160$ ($+21\%$ от минимальной).
\end{enumerate}

\section{Выводы}

В рамках данной работы:

\begin{itemize}
	\item 1
\end{itemize}

\end{document}
